

<%-include('partials/header')%>


<link rel="stylesheet" href="admin/css/adminpanel.css">

<div class="app-wrapper">

    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">

            <script>
                let orders = '<%- JSON.stringify(orders) %>';
                    orders = JSON.parse(orders)
            </script>
        
            <div class="mb-3 d-flex">   
                <h2 class="mb-0">Overview</h2>

                <select id="filterSelect" class="form-select form-select-sm ms-auto d-inline-flex w-auto ">
                    <option value="week" selected>This week</option>
                    <option value="day">Today</option>
                    <option value="month">This Month</option>
                    <option value="year">This Year</option>
                </select>
                <div>
                    <input type="date" id="custom_date" name="custom_date" onkeydown="return false" required>
                    <small id="expiry_date_error" class="error-message" style="display:none;">Expiry date is required</small>
                </div>
            </div>
            <!--  Quick info cards   -->
            <div class="row g-4 mb-4">
                <div class="col-6 col-lg-3">
                    <div class="app-card app-card-stat shadow-sm h-100">
                        <div class="app-card-body p-3 p-lg-4">
                            <h4 class="stats-type mb-1">Overall Sales <br> Count</h4>
                            <div id="sales_count" class="stats-figure"></div>
                        </div><!--//app-card-body-->
                        <a class="app-card-link-mask" href="#"></a>
                    </div><!--//app-card-->
                </div><!--//col 1-->
                <div class="col-6 col-lg-3">
                    <div class="app-card app-card-stat shadow-sm h-100">
                        <div class="app-card-body p-3 p-lg-4">
                            <h4 class="stats-type mb-1">Overall Order <br> Amount</h4>
                            <div id="order_amount" class="stats-figure"></div>
                        </div><!--//app-card-body-->
                        <a class="app-card-link-mask" href="#"></a>
                    </div><!--//app-card-->
                </div><!--//col 2-->
                <div class="col-6 col-lg-3">
                    <div class="app-card app-card-stat shadow-sm h-100">
                        <div class="app-card-body p-3 p-lg-4">
                            <h4  class="stats-type mb-1">Overall Discount Amount</h4>
                            <div id="discount_amount" class="stats-figure"></div>
                            <!-- <div class="stats-meta"> Active</div> -->
                        </div><!--//app-card-body-->
                        <a class="app-card-link-mask" href="#"></a>
                    </div><!--//app-card-->
                </div><!--//col 3-->
                <div class="col-6 col-lg-3">
                    <div class="app-card app-card-stat shadow-sm h-100">
                        <div class="app-card-body p-3 p-lg-4">
                            <h4  class="stats-type mb-1">Overall Coupons Deduction</h4>
                            <div id="coupon_deduction" class="stats-figure"></div>
                            <!-- <div class="stats-meta">active</div> -->
                        </div><!--//app-card-body-->
                        <a class="app-card-link-mask" href="#"></a>
                    </div><!--//app-card-->
                </div><!--//col 4-->

            </div><!--//row  1 -->
            <h4 class="text-center">Sales report</h4>
            <div class="mb-3 d-flex justify-content-center" >  

                <div class="sales_report_btn" onclick="downloadPDF()">Download PDF</div>
                <div class="sales_report_btn" onclick="downloadExcel()">Download Excel</div>
            </div>
            
            <!-- charts   -->

        <div class="graph px-4">

            <div class="row g-4">
                <!-- Graph Card 1 -->
                <div class="col-lg-4 col-md-6">
                <div class="card shadow rounded">
                    <div class="card-body">
                    <h5 class="card-title text-center">Top Selling Product</h5>
                    <canvas id="graph1" style="width: 100%; height: 200px;"></canvas>
                    </div>
                </div>
                </div>

                <!-- Graph Card 2 -->
                <div class="col-lg-4 col-md-6">
                <div class="card shadow rounded">
                    <div class="card-body">
                    <h5 class="card-title text-center">Best Selling Category</h5>
                    <canvas id="graph2" width="400" height="400"></canvas>
                </div>
                </div>
                </div>

                <!-- Graph Card 3 -->
                <div class="col-lg-4 col-md-6">
                <div class="card shadow rounded">
                    <div class="card-body">
                    <h5 class="card-title text-center">Top selling Brands</h5>
                    <canvas id="graph3" style="width: 100%; height: 200px;"></canvas>
                    </div>
                </div>
                </div>
            </div>

            </div>
            <!-- Graph Ends ==== -->

        </div><!--//container-fluid-->
    </div><!--//app-content-->

    <footer class="app-footer">
        <div class="container text-center py-3">
            <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <span class="sr-only">love</span><i class="fas fa-heart"
                    style="color: #fb866a;"></i> by <a class="app-link" href='#' target="_blank">Sanu Shifan</a> for
                my Project</small>

        </div>
    </footer><!--//app-footer-->
</div><!--//app-wrapper-->


<!-- Include jsPDF and jsPDF autoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

<!-- Include xlsx library for Excel file generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="admin/js/adminpanel.js"></script>
<script src="admin/js/adminpanel_graph.js"></script>

